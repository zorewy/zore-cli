#!/usr/bin/env node
const _ = require('lodash')
const chalk = require('chalk')
const semver = require('semver')
const { error } = require('../lib/logs')
const requiredVersion = require('../package.json').engines.node

// 检测node版本是否满足
function checkNodeVersion(wanted, id){
	if (!semver.satisfies(process.version, wanted)) {
		error(chalk.red(
			'你使用的node版本是 ' + process.version + ', 但是' + id +
			' 需要的版本 ' + wanted + '.\n 请升级你的node版本'
		))
		process.exit(1)
	}
}

checkNodeVersion(requiredVersion, 'zore-cli')


var program = require('commander');

// 定义版本和参数选项
program
	.version('0.1.0', '-v, --version')
	.option('-i, --init', 'init something')
	.option('-g, --generate', 'generate something')
	.option('-r, --remove', 'remove something')
program.parse(process.argv);
program
	.command("init")
	.description('初始化描述')
	.action(function (options){
	console.log(options)
});
program
	.command("remove")
	.description('描述')
	.action(function (options){
		console.log(options)
	});
if (_.isEmpty(program.parse(process.argv).args) && process.argv.length === 2) {
	program.help();
}

